<!-- http://ionicframework.com/docs/api/directive/ionSideMenus/ -->
<ion-view hide-nav-bar="true">
    <ion-side-menus>
        <ion-side-menu-content>
          <ion-header-bar class="bar-dark">
              <div class="buttons">
                  <button class="button button-icon ion-navicon" menu-toggle="left"></button>
              </div>
              <h1 class="title">首页</h1>
              <a class="button button-icon icon ion-ios7-search" ng-click="search()"></a>
          </ion-header-bar>
          <ion-nav-view name="menuContent">
              <ion-content class="has-header">

                <ion-refresher ng-if="topics.length > 0 || loadError" pulling-text="下拉刷新..." on-refresh="doRefresh()" refreshing-icon="ion-loading-c">
                </ion-refresher>

                <ion-list class="topics">
                  <ion-item class="col col-50 no-border"
                    collection-repeat="topic in topics"
                    collection-item-height="386"
                    collection-item-width="'50%'"
                    >
                      <div class="item item-image">
                        <a href="#/tab/index/topic/{{topic.id}}"> <img class="full-image" src="templates/tab-inbox-imgs/1.jpg"> </a>
                        <div class="text-left padding-left padding-right padding-top">
                          <a href="#/tab/index/topic/{{topic.id}}"> <h3> {{topic.title}} </h3></a>
                          <h3> <strong class="assertive">￥ {{topic.goods_now_price}}</strong> <del>￥ {{topic.goods_pre_price}}</del> </h3>
                          <h3 am-time-ago="topic.update_at"> </h3>
                          <div class="text-right">
                            <a class="button button-clear">{{topic.reply_count}} <i class=" icon ion-chatbox-working"> </i></a>
                            <a class="button button-clear button-assertive">{{topic.collect_count}} <i class=" icon ion-heart"> </i></a>
                          </div>
                        </div>
                      </div>
                  </ion-item>
                </ion-list>

                <!--
                  Loading icon of infinte-scroll not showing with collection-repeat
                  https://github.com/driftyco/ionic/issues/2376
                -->
                <ion-infinite-scroll on-infinite="loadMore()" distance="10%" icon="ion-loading-c" ng-if="hasNextPage && !loadError">
                </ion-infinite-scroll>
              </ion-content>
          </ion-nav-view>
        </ion-side-menu-content>
        <ion-side-menu side="left">
            <ion-header-bar class="bar-assertive">
                <h1 class="title">分类</h1>
            </ion-header-bar>
            <ion-content>
                <ion-list>
                    <ion-item class="item item-icon-right assertive {{selected==category?'stable-bg':''}}" menu-close ng-click="changeSelected()" ng-repeat="item in sideMenus" href="#/tab/index/topics/{{item.value}}">
                        <i class="icon ion-ios7-arrow-right assertive" ng-if="category==selected"></i> {{item.label}}
                    </ion-item>
                </ion-list>
            </ion-content>
        </ion-side-menu>
    </ion-side-menus>
</ion-view>
