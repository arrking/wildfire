<ion-view view-title="{{currentTab|tabName}}">
  <ion-nav-buttons side="right">
    <button class="button button-icon icon ion-compose" ng-click="showNewTopicModal()" ng-disabled="loginName == null"></button>
  </ion-nav-buttons>
  <ion-content class="has-header">

    <ion-refresher ng-if="topics.length > 0 || loadError" pulling-text="下拉刷新..." on-refresh="doRefresh()" refreshing-icon="ion-loading-c">
    </ion-refresher>

    <ion-list class="topics">
      <ion-item class="col col-50 no-border"
        collection-repeat="topic in topics"
        collection-item-height="386"
        collection-item-width="'50%'"
        >
          <div class="item item-image">
            <a href="#/tab/index/topic/{{topic.id}}"> <img class="full-image" src="templates/tab-inbox-imgs/1.jpg"> </a>
            <div class="text-left padding-left padding-right padding-top">
                <a href="#/tab/index/topic/{{topic.id}}"> <h3> {{topic.title}} </h3></a>
              <h3> <strong class="assertive">￥ {{topic.goods_now_price}}</strong> <del>￥ {{topic.goods_pre_price}}</del> </h3>
              <h3 am-time-ago="topic.update_at"> </h3>
              <div class="text-right">
                <a class="button button-clear">{{topic.reply_count}} <i class=" icon ion-chatbox-working"> </i></a>
                <a class="button button-clear button-assertive">{{topic.collect_count}} <i class=" icon ion-heart"> </i></a>
              </div>
            </div>
          </div>
      </ion-item>
    </ion-list>

    <!--
      Loading icon of infinte-scroll not showing with collection-repeat
      https://github.com/driftyco/ionic/issues/2376
    -->
    <ion-infinite-scroll on-infinite="loadMore()" distance="10%" icon="ion-loading-c" ng-if="hasNextPage && !loadError">
    </ion-infinite-scroll>
  </ion-content>
</ion-view>
